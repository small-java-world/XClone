---
description: 
globs: backend/src/main/kotlin/com/example/xclone/domain/timeline/**/*.kt,backend/src/main/kotlin/com/example/xclone/application/timeline/**/*.kt
alwaysApply: false
---
---
description: タイムラインドメインに関するルール
globs: backend/src/main/kotlin/com/example/xclone/domain/timeline/**/*.kt,backend/src/main/kotlin/com/example/xclone/application/timeline/**/*.kt
alwaysApply: false
---
# Timeline Domain Rules

## エンティティと値オブジェクト
- **Timeline**: ユーザーのタイムラインを表す集約
  - **UserId**: タイムラインの所有者ID
  - **Posts**: 表示される投稿のコレクション

- **TimelineItem**: タイムラインに表示される投稿項目
  - **PostId**: 投稿ID
  - **UserId**: 投稿者ID
  - **Type**: 投稿タイプ（通常/リツイート/引用など）
  - **CreatedAt**: タイムラインへの追加日時

## ビジネスルール
- ホームタイムラインにはフォローしているユーザーの投稿のみ表示
- 探索タイムラインには人気の投稿やトレンドが表示される
- タイムラインは時系列順（新しい順）に表示
- タイムラインはページネーション対応（無限スクロール）
- ブロックしたユーザーの投稿はタイムラインに表示されない
- 削除された投稿はタイムラインから自動的に除外される

## ユースケース
- **GetHomeTimelineUseCase**: ホームタイムライン取得
- **GetExploreTimelineUseCase**: 探索タイムライン取得
- **GetUserTimelineUseCase**: ユーザータイムライン取得
- **RefreshTimelineUseCase**: タイムライン更新
- **GetTrendingTopicsUseCase**: トレンドトピック取得

## API エンドポイント
- **GET /api/timeline/home**: ホームタイムライン取得
- **GET /api/timeline/explore**: 探索タイムライン取得
- **GET /api/users/{userId}/timeline**: ユーザータイムライン取得
- **GET /api/timeline/trending**: トレンドトピック取得 