---
description: 
globs: backend/src/main/kotlin/com/example/xclone/domain/search/**/*.kt,backend/src/main/kotlin/com/example/xclone/application/search/**/*.kt
alwaysApply: false
---
---
description:  
globs: backend/src/main/kotlin/com/example/xclone/domain/search/**/*.kt,backend/src/main/kotlin/com/example/xclone/application/search/**/*.kt
alwaysApply: false
---
# Search Domain Rules

## エンティティと値オブジェクト
- **SearchQuery**: 検索クエリを表す値オブジェクト
  - **Query**: 検索文字列
  - **Type**: 検索タイプ（ユーザー/投稿/トレンド）
  - **Filters**: 検索フィルター（日付範囲、メディア有無など）

- **SearchResult**: 検索結果を表す値オブジェクト
  - **Type**: 結果タイプ（ユーザー/投稿/トレンド）
  - **Items**: 検索結果アイテムのリスト
  - **TotalCount**: 総結果数
  - **NextCursor**: ページネーション用カーソル

## ビジネスルール
- 検索は以下のタイプをサポート：
  - ユーザー検索：ユーザー名、表示名で検索
  - 投稿検索：投稿内容で全文検索
  - ハッシュタグ検索：ハッシュタグで検索
- 検索結果は関連性順または時系列順に表示可能
- 検索結果はページネーション対応
- ブロックしたユーザーの投稿や情報は検索結果に表示されない
- 検索履歴はユーザーごとに保存される

## ユースケース
- **SearchUsersUseCase**: ユーザー検索
- **SearchPostsUseCase**: 投稿検索
- **SearchHashtagsUseCase**: ハッシュタグ検索
- **SaveSearchHistoryUseCase**: 検索履歴保存
- **GetSearchHistoryUseCase**: 検索履歴取得
- **ClearSearchHistoryUseCase**: 検索履歴削除

## API エンドポイント
- **GET /api/search/users**: ユーザー検索
- **GET /api/search/posts**: 投稿検索
- **GET /api/search/hashtags**: ハッシュタグ検索
- **GET /api/search/history**: 検索履歴取得
- **DELETE /api/search/history**: 検索履歴削除
- **DELETE /api/search/history/{id}**: 特定の検索履歴削除 